---
title: Testing
description: Mocking transports and contracts
toc:
  float: true
---

## Mock transport

```ts
import { expect, test } from "bun:test";
import { createHttpClient } from "qubickit";
import type { Transport, TransportRequest, TransportResponse } from "qubickit";

class MockTransport implements Transport {
  last?: TransportRequest;
  async request<T>(options: TransportRequest): Promise<TransportResponse<T>> {
    this.last = options;
    return { status: 200, headers: {}, data: { ok: true } as T };
  }
}

test("http uses headers and query", async () => {
  const transport = new MockTransport();
  const http = createHttpClient({ baseUrl: "https://api.example.com", transport });
  const res = await http.get("/foo", { query: { q: "1" } });
  expect(res).toEqual({ ok: true });
  expect(transport.last?.url).toContain("q=1");
});
```

## Contract helpers
- Use `ContractTypes.<Contract>.createClient(mock)` where `mock` implements `querySmartContract`.
- Stub `responseData` as base64; use `encodeInput`/`decodeOutput` if needed.
